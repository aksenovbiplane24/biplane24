!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.core=t():e.core=t()}(this,(()=>(()=>{var e={991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GettingByemailAdapter=void 0;const n=r(521),i=r(668);t.GettingByemailAdapter=class{constructor(e){this._store=e}async get(e){const t=this._store.find((t=>t.email.value==e.value));return t?(0,n.right)(t):(0,n.left)(new i.InfrastructureError("User not found"))}}},927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GettingAdapter=void 0;const n=r(521),i=r(668);t.GettingAdapter=class{constructor(e){this._store=e}async get(e){const t=this._store.find((t=>t.id.value==e.value));return t?(0,n.right)(t):(0,n.left)(new i.InfrastructureError("User not found"))}}},668:function(e,t,r){var n;n=()=>(()=>{var e={920:(e,t,r)=>{"use strict";var n=r(4300).Buffer,i=r(4300).SlowBuffer;function o(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}e.exports=o,o.install=function(){n.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var s=n.prototype.equal,a=i.prototype.equal;o.restore=function(){n.prototype.equal=s,i.prototype.equal=a}},6120:(e,t,r)=>{"use strict";var n=r(7834).Buffer,i=r(2221);function o(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function s(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}e.exports={derToJose:function(e,t){e=o(e);var r=i(t),s=r+1,a=e.length,u=0;if(48!==e[u++])throw new Error('Could not find expected "seq"');var c=e[u++];if(129===c&&(c=e[u++]),a-u<c)throw new Error('"seq" specified length of "'+c+'", only "'+(a-u)+'" remaining');if(2!==e[u++])throw new Error('Could not find expected "int" for "r"');var f=e[u++];if(a-u-2<f)throw new Error('"r" specified length of "'+f+'", only "'+(a-u-2)+'" available');if(s<f)throw new Error('"r" specified length of "'+f+'", max of "'+s+'" is acceptable');var l=u;if(u+=f,2!==e[u++])throw new Error('Could not find expected "int" for "s"');var h=e[u++];if(a-u!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(a-u)+'"');if(s<h)throw new Error('"s" specified length of "'+h+'", max of "'+s+'" is acceptable');var p=u;if((u+=h)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-u)+'" bytes remain');var d=r-f,v=r-h,g=n.allocUnsafe(d+f+v+h);for(u=0;u<d;++u)g[u]=0;e.copy(g,u,l+Math.max(-d,0),l+f);for(var m=u=r;u<m+v;++u)g[u]=0;return e.copy(g,u,p+Math.max(-v,0),p+h),(g=g.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var r=i(t),a=e.length;if(a!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+a+'"');var u=s(e,0,r),c=s(e,r,e.length),f=r-u,l=r-c,h=2+f+1+1+l,p=h<128,d=n.allocUnsafe((p?2:3)+h),v=0;return d[v++]=48,p?d[v++]=h:(d[v++]=129,d[v++]=255&h),d[v++]=2,d[v++]=f,u<0?(d[v++]=0,v+=e.copy(d,v,0,r)):v+=e.copy(d,v,u,r),d[v++]=2,d[v++]=l,c<0?(d[v++]=0,e.copy(d,v,r)):e.copy(d,v,r+c),d}}},2221:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var r={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=r[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},1938:(e,t,r)=>{var n=r(3478);e.exports=function(e,t){t=t||{};var r=n.decode(e,t);if(!r)return null;var i=r.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:r.header,payload:i,signature:r.signature}:i}},9126:(e,t,r)=>{e.exports={decode:r(1938),verify:r(8991),sign:r(723),JsonWebTokenError:r(9155),NotBeforeError:r(7879),TokenExpiredError:r(8080)}},9155:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},7879:(e,t,r)=>{var n=r(9155),i=function(e,t){n.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(n.prototype)).constructor=i,e.exports=i},8080:(e,t,r)=>{var n=r(9155),i=function(e,t){n.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(n.prototype)).constructor=i,e.exports=i},8643:(e,t,r)=>{var n=r(4395);e.exports=n.satisfies(process.version,"^6.12.0 || >=8.0.0")},3298:(e,t,r)=>{var n=r(1378);e.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=n(e);if(void 0===i)return;return Math.floor(r+i/1e3)}return"number"==typeof e?r+e:void 0}},4395:(e,t)=>{var r;t=e.exports=K,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=0,a=s++;o[a]="0|[1-9]\\d*";var u=s++;o[u]="[0-9]+";var c=s++;o[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=s++;o[f]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var l=s++;o[l]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var h=s++;o[h]="(?:"+o[a]+"|"+o[c]+")";var p=s++;o[p]="(?:"+o[u]+"|"+o[c]+")";var d=s++;o[d]="(?:-("+o[h]+"(?:\\."+o[h]+")*))";var v=s++;o[v]="(?:-?("+o[p]+"(?:\\."+o[p]+")*))";var g=s++;o[g]="[0-9A-Za-z-]+";var m=s++;o[m]="(?:\\+("+o[g]+"(?:\\."+o[g]+")*))";var y=s++,b="v?"+o[f]+o[d]+"?"+o[m]+"?";o[y]="^"+b+"$";var w="[v=\\s]*"+o[l]+o[v]+"?"+o[m]+"?",j=s++;o[j]="^"+w+"$";var O=s++;o[O]="((?:<|>)?=?)";var E=s++;o[E]=o[u]+"|x|X|\\*";var _=s++;o[_]=o[a]+"|x|X|\\*";var S=s++;o[S]="[v=\\s]*("+o[_]+")(?:\\.("+o[_]+")(?:\\.("+o[_]+")(?:"+o[d]+")?"+o[m]+"?)?)?";var R=s++;o[R]="[v=\\s]*("+o[E]+")(?:\\.("+o[E]+")(?:\\.("+o[E]+")(?:"+o[v]+")?"+o[m]+"?)?)?";var P=s++;o[P]="^"+o[O]+"\\s*"+o[S]+"$";var x=s++;o[x]="^"+o[O]+"\\s*"+o[R]+"$";var A=s++;o[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var M=s++;o[M]="(?:~>?)";var D=s++;o[D]="(\\s*)"+o[M]+"\\s+",i[D]=new RegExp(o[D],"g");var I=s++;o[I]="^"+o[M]+o[S]+"$";var V=s++;o[V]="^"+o[M]+o[R]+"$";var k=s++;o[k]="(?:\\^)";var T=s++;o[T]="(\\s*)"+o[k]+"\\s+",i[T]=new RegExp(o[T],"g");var L=s++;o[L]="^"+o[k]+o[S]+"$";var B=s++;o[B]="^"+o[k]+o[R]+"$";var N=s++;o[N]="^"+o[O]+"\\s*("+w+")$|^$";var U=s++;o[U]="^"+o[O]+"\\s*("+b+")$|^$";var $=s++;o[$]="(\\s*)"+o[O]+"\\s*("+w+"|"+o[S]+")",i[$]=new RegExp(o[$],"g");var C=s++;o[C]="^\\s*("+o[S]+")\\s+-\\s+("+o[S]+")\\s*$";var G=s++;o[G]="^\\s*("+o[R]+")\\s+-\\s+("+o[R]+")\\s*$";var H=s++;o[H]="(<|>)?=?\\s*\\*";for(var F=0;F<35;F++)r(F,o[F]),i[F]||(i[F]=new RegExp(o[F]));function q(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[j]:i[y]).test(e))return null;try{return new K(e,t)}catch(e){return null}}function K(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof K){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof K))return new K(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[j]:i[y]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=q,t.valid=function(e,t){var r=q(e,t);return r?r.version:null},t.clean=function(e,t){var r=q(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof K||(e=new K(e,this.options)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.options)),W(this.major,e.major)||W(this.minor,e.minor)||W(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return W(n,i)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new K(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(X(e,t))return null;var r=q(e),n=q(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},t.compareIdentifiers=W;var J=/^[0-9]+$/;function W(e,t){var r=J.test(e),n=J.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function z(e,t,r){return new K(e,r).compare(new K(t,r))}function Y(e,t,r){return z(e,t,r)>0}function Z(e,t,r){return z(e,t,r)<0}function X(e,t,r){return 0===z(e,t,r)}function Q(e,t,r){return 0!==z(e,t,r)}function ee(e,t,r){return z(e,t,r)>=0}function te(e,t,r){return z(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return X(e,r,n);case"!=":return Q(e,r,n);case">":return Y(e,r,n);case">=":return ee(e,r,n);case"<":return Z(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return W(t,e)},t.major=function(e,t){return new K(e,t).major},t.minor=function(e,t){return new K(e,t).minor},t.patch=function(e,t){return new K(e,t).patch},t.compare=z,t.compareLoose=function(e,t){return z(e,t,!0)},t.rcompare=function(e,t,r){return z(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=Y,t.lt=Z,t.eq=X,t.neq=Q,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var ie={};function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof ne)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,r,n,i,o,s,a,u,c,f,l,h){return((t=se(r)?"":se(n)?">="+r+".0.0":se(i)?">="+r+"."+n+".0":">="+t)+" "+(a=se(u)?"":se(c)?"<"+(+u+1)+".0.0":se(f)?"<"+u+"."+(+c+1)+".0":l?"<="+u+"."+c+"."+f+"-"+l:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){try{t=new oe(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var i,o,s,a,u;switch(e=new K(e,n),t=new oe(t,n),r){case">":i=Y,o=te,s=Z,a=">",u=">=";break;case"<":i=Z,o=ee,s=Y,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var f=t.set[c],l=null,h=null;if(f.forEach((function(e){e.semver===ie&&(e=new ne(">=0.0.0")),l=l||e,h=h||e,i(e.semver,l.semver,n)?l=e:s(e.semver,h.semver,n)&&(h=e)})),l.operator===a||l.operator===u)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===u&&s(e,h.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?i[N]:i[U],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new K(r[2],this.options.loose):this.semver=ie},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new K(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new oe(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new oe(this.value,t),ce(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||u},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[G]:i[C];e=e.replace(n,ae),r("hyphen replace",e),e=e.replace(i[$],"$1$2$3"),r("comparator trim",e,i[$]),e=(e=(e=e.replace(i[D],"$1~")).replace(i[T],"$1^")).split(/\s+/).join(" ");var o=t?i[N]:i[U],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[B]:i[L];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),se(n)?a="":se(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[V]:i[I];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),se(n)?a="":se(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[x]:i[P];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var u=se(i),c=u||se(o),f=c||se(s);return"="===n&&f&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&f?(c&&(o=0),s=0,">"===n?(n=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",c?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":f&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[H],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s.map((function(e){return new ne(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new K(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new K(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new K(n=e,r)))})),n},t.minVersion=function(e,t){e=new oe(e,t);var r=new K("0.0.0");if(e.test(r))return r;if(r=new K("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new K(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!Y(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,t.prerelease=function(e,t){var r=q(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new oe(e,r),t=new oe(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof K)return e;if("string"!=typeof e)return null;var t=e.match(i[A]);return null==t?null:q(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},723:(e,t,r)=>{var n=r(3298),i=r(8643),o=r(3478),s=r(892),a=r(3417),u=r(4383),c=r(3293),f=r(4772),l=r(6496),h=r(6138),p=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&p.splice(3,0,"PS256","PS384","PS512");var d={expiresIn:{isValid:function(e){return u(e)||l(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||l(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return l(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,p),message:'"algorithm" must be a valid string enum value'},header:{isValid:f,message:'"header" must be an object'},encoding:{isValid:l,message:'"encoding" must be a string'},issuer:{isValid:l,message:'"issuer" must be a string'},subject:{isValid:l,message:'"subject" must be a string'},jwtid:{isValid:l,message:'"jwtid" must be a string'},noTimestamp:{isValid:a,message:'"noTimestamp" must be a boolean'},keyid:{isValid:l,message:'"keyid" must be a string'},mutatePayload:{isValid:a,message:'"mutatePayload" must be a boolean'}},v={iat:{isValid:c,message:'"iat" should be a number of seconds'},exp:{isValid:c,message:'"exp" should be a number of seconds'},nbf:{isValid:c,message:'"nbf" should be a number of seconds'}};function g(e,t,r,n){if(!f(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach((function(i){var o=e[i];if(o){if(!o.isValid(r[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+n+'"')}))}var m={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},y=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,r,i){"function"==typeof r?(i=r,r={}):r=r||{};var s="object"==typeof e&&!Buffer.isBuffer(e),a=Object.assign({alg:r.algorithm||"HS256",typ:s?"JWT":void 0,kid:r.keyid},r.header);function u(e){if(i)return i(e);throw e}if(!t&&"none"!==r.algorithm)return u(new Error("secretOrPrivateKey must have a value"));if(void 0===e)return u(new Error("payload is required"));if(s){try{!function(e){g(v,!0,e,"payload")}(e)}catch(e){return u(e)}r.mutatePayload||(e=Object.assign({},e))}else{var c=y.filter((function(e){return void 0!==r[e]}));if(c.length>0)return u(new Error("invalid "+c.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==r.expiresIn)return u(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==r.notBefore)return u(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){g(d,!1,e,"options")}(r)}catch(e){return u(e)}var f=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:s&&(e.iat=f),void 0!==r.notBefore){try{e.nbf=n(r.notBefore,f)}catch(e){return u(e)}if(void 0===e.nbf)return u(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==r.expiresIn&&"object"==typeof e){try{e.exp=n(r.expiresIn,f)}catch(e){return u(e)}if(void 0===e.exp)return u(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(m).forEach((function(t){var n=m[t];if(void 0!==r[t]){if(void 0!==e[n])return u(new Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'));e[n]=r[t]}}));var l=r.encoding||"utf8";if("function"!=typeof i)return o.sign({header:a,payload:e,secret:t,encoding:l});i=i&&h(i),o.createSign({header:a,privateKey:t,payload:e,encoding:l}).once("error",i).once("done",(function(e){i(null,e)}))}},8991:(e,t,r)=>{var n=r(9155),i=r(7879),o=r(8080),s=r(1938),a=r(3298),u=r(8643),c=r(3478),f=["RS256","RS384","RS512","ES256","ES384","ES512"],l=["RS256","RS384","RS512"],h=["HS256","HS384","HS512"];u&&(f.splice(3,0,"PS256","PS384","PS512"),l.splice(3,0,"PS256","PS384","PS512")),e.exports=function(e,t,r,u){var p;if("function"!=typeof r||u||(u=r,r={}),r||(r={}),r=Object.assign({},r),p=u||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return p(new n("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return p(new n("nonce must be a non-empty string"));var d=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return p(new n("jwt must be provided"));if("string"!=typeof e)return p(new n("jwt must be a string"));var v,g=e.split(".");if(3!==g.length)return p(new n("jwt malformed"));try{v=s(e,{complete:!0})}catch(e){return p(e)}if(!v)return p(new n("invalid token"));var m,y=v.header;if("function"==typeof t){if(!u)return p(new n("verify must be called asynchronous if secret or public key is provided as a callback"));m=t}else m=function(e,r){return r(null,t)};return m(y,(function(t,s){if(t)return p(new n("error in secret or public key callback: "+t.message));var u,m=""!==g[2].trim();if(!m&&s)return p(new n("jwt signature is required"));if(m&&!s)return p(new n("secret or public key must be provided"));if(m||r.algorithms||(r.algorithms=["none"]),r.algorithms||(r.algorithms=~s.toString().indexOf("BEGIN CERTIFICATE")||~s.toString().indexOf("BEGIN PUBLIC KEY")?f:~s.toString().indexOf("BEGIN RSA PUBLIC KEY")?l:h),!~r.algorithms.indexOf(v.header.alg))return p(new n("invalid algorithm"));try{u=c.verify(e,v.header.alg,s)}catch(e){return p(e)}if(!u)return p(new n("invalid signature"));var b=v.payload;if(void 0!==b.nbf&&!r.ignoreNotBefore){if("number"!=typeof b.nbf)return p(new n("invalid nbf value"));if(b.nbf>d+(r.clockTolerance||0))return p(new i("jwt not active",new Date(1e3*b.nbf)))}if(void 0!==b.exp&&!r.ignoreExpiration){if("number"!=typeof b.exp)return p(new n("invalid exp value"));if(d>=b.exp+(r.clockTolerance||0))return p(new o("jwt expired",new Date(1e3*b.exp)))}if(r.audience){var w=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(b.aud)?b.aud:[b.aud]).some((function(e){return w.some((function(t){return t instanceof RegExp?t.test(e):t===e}))})))return p(new n("jwt audience invalid. expected: "+w.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&b.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(b.iss)))return p(new n("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&b.sub!==r.subject)return p(new n("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&b.jti!==r.jwtid)return p(new n("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&b.nonce!==r.nonce)return p(new n("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof b.iat)return p(new n("iat required when maxAge is specified"));var j=a(r.maxAge,b.iat);if(void 0===j)return p(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(d>=j+(r.clockTolerance||0))return p(new o("maxAge exceeded",new Date(1e3*j)))}if(!0===r.complete){var O=v.signature;return p(null,{header:y,payload:b,signature:O})}return p(null,b)}))}},9833:(e,t,r)=>{var n=r(920),i=r(7834).Buffer,o=r(6113),s=r(6120),a=r(3837),u="secret must be a string or buffer",c="key must be a string or a buffer",f="function"==typeof o.createPublicKey;function l(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!f)throw v(c);if("object"!=typeof e)throw v(c);if("string"!=typeof e.type)throw v(c);if("string"!=typeof e.asymmetricKeyType)throw v(c);if("function"!=typeof e.export)throw v(c)}}function h(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw v("key must be a string, a buffer or an object")}function p(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function d(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function v(e){var t=[].slice.call(arguments,1),r=a.format.bind(a,e).apply(null,t);return new TypeError(r)}function g(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function m(e){return function(t,r){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!f)throw v(u);if("object"!=typeof e)throw v(u);if("secret"!==e.type)throw v(u);if("function"!=typeof e.export)throw v(u)}}(r),t=g(t);var n=o.createHmac("sha"+e,r);return p((n.update(t),n.digest("base64")))}}function y(e){return function(t,r,o){var s=m(e)(t,o);return n(i.from(r),i.from(s))}}function b(e){return function(t,r){h(r),t=g(t);var n=o.createSign("RSA-SHA"+e);return p((n.update(t),n.sign(r,"base64")))}}function w(e){return function(t,r,n){l(n),t=g(t),r=d(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function j(e){return function(t,r){h(r),t=g(t);var n=o.createSign("RSA-SHA"+e);return p((n.update(t),n.sign({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function O(e){return function(t,r,n){l(n),t=g(t),r=d(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function E(e){var t=b(e);return function(){var r=t.apply(null,arguments);return s.derToJose(r,"ES"+e)}}function _(e){var t=w(e);return function(r,n,i){return n=s.joseToDer(n,"ES"+e).toString("base64"),t(r,n,i)}}function S(){return function(){return""}}function R(){return function(e,t){return""===t}}f&&(c+=" or a KeyObject",u+="or a KeyObject"),e.exports=function(e){var t={hs:m,rs:b,ps:j,es:E,none:S},r={hs:y,rs:w,ps:O,es:_,none:R},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw v('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:t[i](o),verify:r[i](o)}}},3478:(e,t,r)=>{var n=r(3577),i=r(2678);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=n.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new n(e)},t.createVerify=function(e){return new i(e)}},8291:(e,t,r)=>{var n=r(7834).Buffer,i=r(2781);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}r(3837).inherits(o,i),o.prototype.write=function(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o},3577:(e,t,r)=>{var n=r(7834).Buffer,i=r(8291),o=r(9833),s=r(2781),a=r(7730),u=r(3837);function c(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,s=o(t.alg),f=function(e,t,r){r=r||"utf8";var n=c(a(e),"binary"),i=c(a(t),r);return u.format("%s.%s",n,i)}(t,r,i),l=s.sign(f,n);return u.format("%s.%s",f,l)}function l(e){var t=e.secret||e.privateKey||e.key,r=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}u.inherits(l,s),l.prototype.sign=function(){try{var e=f({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},l.sign=f,e.exports=l},7730:(e,t,r)=>{var n=r(4300).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},2678:(e,t,r)=>{var n=r(7834).Buffer,i=r(8291),o=r(9833),s=r(2781),a=r(7730),u=r(3837),c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function f(e){var t=e.split(".",1)[0];return function(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}(n.from(t,"base64").toString("binary"))}function l(e){return e.split(".")[2]}function h(e){return c.test(e)&&!!f(e)}function p(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=l(e=a(e)),s=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(s,i,r)}function d(e,t){if(t=t||{},!h(e=a(e)))return null;var r=f(e);if(!r)return null;var i=function(e,t){t=t||"utf8";var r=e.split(".")[1];return n.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:l(e)}}function v(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}u.inherits(v,s),v.prototype.verify=function(){try{var e=p(this.signature.buffer,this.algorithm,this.key.buffer),t=d(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},v.decode=d,v.isValid=h,v.verify=p,e.exports=v},892:e=>{var t=9007199254740991,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=/^(?:0|[1-9]\d*)$/,a=parseInt;function u(e){return e!=e}var c,f,l=Object.prototype,h=l.hasOwnProperty,p=l.toString,d=l.propertyIsEnumerable,v=(c=Object.keys,f=Object,function(e){return c(f(e))}),g=Math.max;function m(e,r){return!!(r=null==r?t:r)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<r}var y=Array.isArray;function b(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}(e.length)&&!function(e){var t=w(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function j(e){return!!e&&"object"==typeof e}e.exports=function(e,t,s,c){var f;e=b(e)?e:(f=e)?function(e,t){return function(t,r){for(var n=-1,i=t?t.length:0,o=Array(i);++n<i;)o[n]=(s=t[n],e[s]);var s;return o}(t)}(f,function(e){return b(e)?function(e,t){var r=y(e)||function(e){return function(e){return j(e)&&b(e)}(e)&&h.call(e,"callee")&&(!d.call(e,"callee")||"[object Arguments]"==p.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!h.call(e,o)||i&&("length"==o||m(o,n))||r.push(o);return r}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||l))return v(e);var t,r,n=[];for(var i in Object(e))h.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e)}(f)):[],s=s&&!c?function(e){var t=function(e){return e?1/0===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||j(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):n.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),s=t%1;return t==t?s?t-s:t:0}(s):0;var O=e.length;return s<0&&(s=g(O+s,0)),function(e){return"string"==typeof e||!y(e)&&j(e)&&"[object String]"==p.call(e)}(e)?s<=O&&e.indexOf(t,s)>-1:!!O&&function(e,t,r){if(t!=t)return function(e,t,r,n){for(var i=e.length,o=r+-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,u,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,s)>-1}},3417:e=>{var t=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==t.call(e)}},4383:e=>{var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s=Object.prototype.toString;function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var u=function(e){return e?1/0===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(a(e)){var u="function"==typeof e.valueOf?e.valueOf():e;e=a(u)?u+"":u}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var c=n.test(e);return c||i.test(e)?o(e.slice(2),c?2:8):r.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),c=u%1;return u==u?c?u-c:u:0}(e)}},3293:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==t.call(e)}},4772:e=>{var t,r,n=Function.prototype,i=Object.prototype,o=n.toString,s=i.hasOwnProperty,a=o.call(Object),u=i.toString,c=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=u.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=c(e);if(null===t)return!0;var r=s.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&o.call(r)==a}},6496:e=>{var t=Object.prototype.toString,r=Array.isArray;e.exports=function(e){return"string"==typeof e||!r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},6138:e=>{var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s=Object.prototype.toString;function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,u){var c;if("function"!=typeof u)throw new TypeError("Expected a function");return e=function(e){var u=function(e){return e?1/0===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(a(e)){var u="function"==typeof e.valueOf?e.valueOf():e;e=a(u)?u+"":u}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var c=n.test(e);return c||i.test(e)?o(e.slice(2),c?2:8):r.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),c=u%1;return u==u?c?u-c:u:0}(e),function(){return--e>0&&(c=u.apply(this,arguments)),e<=1&&(u=void 0),c}}(2,e)}},1378:e=>{var t=1e3,r=60*t,n=60*r,i=24*n;function o(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,u,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&isFinite(e))return s.long?(a=e,(u=Math.abs(a))>=i?o(a,u,i,"day"):u>=n?o(a,u,n,"hour"):u>=r?o(a,u,r,"minute"):u>=t?o(a,u,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7834:(e,t,r)=>{var n=r(4300),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},1200:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomainError=void 0,t.DomainError=class{constructor(e){this.messages=e}}},6043:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1200),t),i(r(9027),t)},9027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfrastructureError=void 0,t.InfrastructureError=class{constructor(e){this.messages=e}}},4889:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6043),t),i(r(2448),t)},974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreatedValueObject=void 0;const n=r(1200),i=r(9521);class o{constructor(e){this.value=e}static new(e){return e instanceof Date==0?(0,i.left)(new n.DomainError("Date is invalid")):(0,i.right)(new o(e))}}t.CreatedValueObject=o},2805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdValueObjcet=void 0;const n=r(6445),i=r(6445),o=r(1200),s=r(9521);class a{constructor(e){this.value=e}static new(){return new a((0,n.v4)())}static fromOrigin(e){return"string"!=typeof e?(0,s.left)(new o.DomainError("Id is invalid")):(0,i.validate)(e)?(0,s.right)(new a(e)):(0,s.left)(new o.DomainError("Id is invalid"))}}t.IdValueObjcet=a},2448:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(974),t),i(r(2805),t),i(r(5287),t)},5287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameValueObject=void 0;const n=r(9521),i=r(1200);class o{constructor(e){this.value=e}static new(e){return"string"!=typeof e||"number"!=typeof e?(0,n.left)(new i.DomainError("Invalid")):(0,n.right)(new o(e))}}t.NameValueObject=o},3641:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(4889),t),i(r(8146),t),i(r(7371),t),i(r(4275),t)},8921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreatingDto=void 0,t.CreatingDto=class{constructor(e,t,r,n){this.name=e,this.formula=t,this.type=r,this.idUser=n}}},4012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreatingUserDto=void 0;var n=r(8921);Object.defineProperty(t,"CreatingUserDto",{enumerable:!0,get:function(){return n.CreatingDto}})},8146:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.RightsMarkEntity=t.RightsMarkUserEntity=t.MarkeAggregate=void 0,i(r(4012),t),i(r(3964),t);var o=r(9121);Object.defineProperty(t,"MarkeAggregate",{enumerable:!0,get:function(){return o.MarkeAggregate}});var s=r(2560);Object.defineProperty(t,"RightsMarkUserEntity",{enumerable:!0,get:function(){return s.RightsMarkUserEntity}});var a=r(5359);Object.defineProperty(t,"RightsMarkEntity",{enumerable:!0,get:function(){return a.RightsMarkEntity}})},9121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkeAggregate=void 0;const n=r(9521),i=r(1200),o=r(974),s=r(2805),a=r(5287),u=r(5359),c=r(2560),f=r(889),l=r(4260);class h{constructor(e,t,r,n,i,o,s){this.id=e,this.name=t,this.formula=r,this.type=n,this.globalRight=i,this.userRights=o,this.created=s}static new(e){const t=s.IdValueObjcet.fromOrigin(e.name);if(t.isLeft())return(0,n.left)(t.value);const r=a.NameValueObject.new(e.name);if(r.isLeft())return(0,n.left)(r.value);const i=f.FormaulaValueObject.new(e.formula);if(i.isLeft())return(0,n.left)(i.value);const p=l.TypeValueObject.new(e.type);if(p.isLeft())return(0,n.left)(p.value);const d=o.CreatedValueObject.new(new Date);if(d.isLeft())return(0,n.left)(d.value);const v=s.IdValueObjcet.new(),g=u.RightsMarkEntity.new(v.value);if(g.isLeft())return(0,n.left)(g.value);const m=c.RightsMarkUserEntity.newForOwn(v,t.value);return m.isLeft()?(0,n.left)(m.value):(0,n.right)(new h(s.IdValueObjcet.new(),r.value,i.value,p.value,g.value,[m.value],d.value))}addRightForUser(e,t){const r=c.RightsMarkUserEntity.newForUser(this.id,e,t);return r.isLeft()?(0,n.left)(r.value):(0,n.right)(new h(this.id,this.name,this.formula,this.type,this.globalRight,[...this.userRights,r.value],this.created))}demandRight(e,t){const r=this.globalRight.checkRight(t);if(r.isRight())return(0,n.right)(r.value);{const r=this.userRights.find((t=>t.id.value==e.value));if(!r)return(0,n.left)(new i.DomainError("You have not right for execute this operation"));const o=r.demandRight(t);return o.isLeft()?(0,n.left)(o.value):(0,n.right)(!0)}}}t.MarkeAggregate=h},3964:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RightsMarkUserEntity=void 0;const n=r(9521),i=r(1200),o=r(974),s=r(2805),a=r(7762);class u{constructor(e,t,r,n,i,o){this.id=e,this.idMark=t,this.idUser=r,this.readOnlyRight=n,this.writeAndReadRight=i,this.created=o}static newForOwn(e,t){const r=o.CreatedValueObject.new(new Date);return r.isLeft()?(0,n.left)(r.value):(0,n.right)(new u(s.IdValueObjcet.new(),e,t,a.RightValueObject.fromOrigin(!0),a.RightValueObject.fromOrigin(!0),r.value))}static newForUser(e,t,r){const c=o.CreatedValueObject.new(new Date);return c.isLeft()?(0,n.left)(c.value):"string"!=typeof r||"READ"!=r&&"WRITE_AND_READ"!=r?(0,n.left)(new i.DomainError("Invalid operation")):"READ"==r?(0,n.right)(new u(s.IdValueObjcet.new(),e,t,a.RightValueObject.fromOrigin(!0),a.RightValueObject.fromOrigin(!1),c.value)):(0,n.right)(new u(s.IdValueObjcet.new(),e,t,a.RightValueObject.fromOrigin(!0),a.RightValueObject.fromOrigin(!0),c.value))}setRight(e){return"string"!=typeof e||"READ"!=e&&"WRITE_AND_READ"!=e?(0,n.left)(new i.DomainError("Invalid operation")):"READ"==e?(0,n.right)(new u(this.id,this.idMark,this.idUser,a.RightValueObject.fromOrigin(!0),a.RightValueObject.fromOrigin(!1),this.created)):(0,n.right)(new u(this.id,this.idMark,this.idUser,a.RightValueObject.fromOrigin(!0),a.RightValueObject.fromOrigin(!0),this.created))}setRightDefault(){return(0,n.right)(new u(this.id,this.idMark,this.idUser,a.RightValueObject.fromOrigin(!1),a.RightValueObject.fromOrigin(!1),this.created))}demandRight(e){return"string"!=typeof e||"READ"!=e&&"WRITE_AND_READ"!=e?(0,n.left)(new i.DomainError("Invalid operation")):"READ"==e?0==this.readOnlyRight.value?(0,n.left)(new i.DomainError("You have not right for execute this operation")):(0,n.right)(this.readOnlyRight.value):0==this.writeAndReadRight.value?(0,n.left)(new i.DomainError("You have not right for execute this operation")):(0,n.right)(this.writeAndReadRight.value)}}t.RightsMarkUserEntity=u},5359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RightsMarkEntity=void 0;const n=r(9521),i=r(1200),o=r(2805),s=r(7762),a=r(974);class u{constructor(e,t,r,n,i,o){this.id=e,this.idMark=t,this.ownOnlyRight=r,this.readOnlyForAllRight=n,this.writeAndReadForAllRight=i,this.created=o}static new(e){const t=o.IdValueObjcet.fromOrigin(e);if(t.isLeft())return(0,n.left)(t.value);const r=a.CreatedValueObject.new(new Date);return r.isLeft()?(0,n.left)(r.value):(0,n.right)(new u(o.IdValueObjcet.new(),t.value,s.RightValueObject.fromOrigin(!0),s.RightValueObject.fromOrigin(!1),s.RightValueObject.fromOrigin(!1),r.value))}checkRight(e){return"string"!=typeof e||"READ"!=e&&"WRITE_AND_READ"!=e?(0,n.left)(new i.DomainError("Invalid name operation")):"READ"==e?0==this.readOnlyForAllRight.value?(0,n.left)(new i.DomainError("You have not right for execute this operation")):(0,n.right)(this.readOnlyForAllRight.value):0==this.writeAndReadForAllRight.value?(0,n.left)(new i.DomainError("You have not right for execute this operation")):(0,n.right)(this.writeAndReadForAllRight.value)}setRight(e){return"string"!=typeof e||"READ"!=e&&"WRITE_AND_READ"!=e?(0,n.left)(new i.DomainError("Invalid operation")):"READ"==e?(0,n.right)(new u(this.id,this.idMark,s.RightValueObject.fromOrigin(!0),s.RightValueObject.fromOrigin(!0),s.RightValueObject.fromOrigin(!1),this.created)):(0,n.right)(new u(this.id,this.idMark,s.RightValueObject.fromOrigin(!0),s.RightValueObject.fromOrigin(!0),s.RightValueObject.fromOrigin(!0),this.created))}setRightDefault(){return new u(this.id,this.idMark,s.RightValueObject.fromOrigin(!0),s.RightValueObject.fromOrigin(!1),s.RightValueObject.fromOrigin(!1),this.created)}}t.RightsMarkEntity=u},889:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormaulaValueObject=void 0;const n=r(9521),i=r(1200);class o{constructor(e){this.value=e}static new(e){return"string"!=typeof e?(0,n.left)(new i.DomainError("Formula must be string")):e.match(/^[0-9\*\/\-\+]+$/)?(0,n.right)(new o(e)):(0,n.left)(new i.DomainError("Formula contains invalid value"))}}t.FormaulaValueObject=o},7762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RightValueObject=void 0;const n=r(9521),i=r(1200);class o{constructor(e){this.value=e}static new(e){return"boolean"!=typeof e?(0,n.left)(new i.DomainError("Invalid havings")):(0,n.right)(new o(e))}static fromOrigin(e){return new o(e)}}t.RightValueObject=o},4260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeValueObject=void 0;const n=r(1200),i=r(9521);class o{constructor(e){this.value=e}static new(e){return"string"!=typeof e?(0,i.left)(new n.DomainError("Invalid type of mark")):"TURNOVER"!=e&&"ACTUAL"!=e?(0,i.left)(new n.DomainError("")):(0,i.right)(new o(e))}}t.TypeValueObject=o},7371:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenEntity=void 0,i(r(2238),t);var o=r(8341);Object.defineProperty(t,"TokenEntity",{enumerable:!0,get:function(){return o.TokenEntity}})},8341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenEntity=void 0;const n=r(9521),i=r(9126),o=r(1200),s=r(2805),a=r(9080);class u{constructor(e,t){this.token=e,this.refreshToken=t}static new(e,t,r){const i=a.TokenValueObject.new(e,t,r.id.value),o=a.TokenValueObject.new(e,4*t,r.id.value);return i.isLeft()?(0,n.left)(i.value):o.isLeft()?(0,n.left)(o.value):(0,n.right)(new u(i.value,o.value))}static validate(e,t){try{if("string"!=typeof e)return(0,n.left)(new o.DomainError("Token is invalid"));let r=(0,i.verify)(e,t);return"string"!=typeof r?s.IdValueObjcet.fromOrigin(r.id):(0,n.left)(new o.DomainError("Invalid Payload"))}catch(e){return(0,n.left)(new o.DomainError("Token is invalid"))}}}t.TokenEntity=u},2238:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9080),t)},9080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenValueObject=void 0;const n=r(9126),i=r(9521),o=r(1200);class s{constructor(e){this.value=e}static new(e,t,r){return"string"!=typeof e?(0,i.left)(new o.DomainError("Secret is invalid")):"number"!=typeof t?(0,i.left)(new o.DomainError("Expires is invalid")):"string"!=typeof r?(0,i.left)(new o.DomainError("Id is invalid")):(0,i.right)(new s((0,n.sign)({id:r},e)))}}t.TokenValueObject=s},7908:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4275:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.UserAggregate=t.SytemRightEntity=void 0,i(r(7908),t),i(r(1985),t),i(r(7723),t);var o=r(4846);Object.defineProperty(t,"SytemRightEntity",{enumerable:!0,get:function(){return o.SytemRightEntity}});var s=r(4540);Object.defineProperty(t,"UserAggregate",{enumerable:!0,get:function(){return s.UserAggregate}})},6390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1985:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6390),t),i(r(6759),t)},4846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SytemRightEntity=void 0;const n=r(9521),i=r(974),o=r(2805),s=r(2215),a=r(1093);class u{constructor(e,t,r,n,i){this.id=e,this.idUser=t,this.name=r,this.description=n,this.created=i}static new(e,t,r){const c=a.RightNameValueObject.new(t);if(c.isLeft())return(0,n.left)(c.value);const f=s.RightDescriptionValueObject.new(r);if(f.isLeft())return(0,n.left)(f.value);const l=i.CreatedValueObject.new(new Date);return l.isLeft()?(0,n.left)(l.value):(0,n.right)(new u(o.IdValueObjcet.new(),e,c.value,f.value,l.value))}}t.SytemRightEntity=u},4540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserAggregate=void 0;const n=r(9521),i=r(1200),o=r(2805),s=r(4846),a=r(4722),u=r(6464);class c{constructor(e,t,r,n){this.id=e,this.email=t,this.password=r,this.rights=n}static new(e){const t=a.EmailValueObject.new(e.email);if(t.isLeft())return(0,n.left)(t.value);const r=u.PasswordValueObject.new(e.password);if(r.isLeft())return(0,n.left)(r.value);const i=o.IdValueObjcet.new(),f=s.SytemRightEntity.new(i,"ADMIN_DASHBOARD","You can admin any dashoboards");return f.isLeft()?(0,n.left)(f.value):(0,n.right)(new c(i,t.value,r.value,[f.value]))}verifyPassword(e){const t=this.password.verify(e);return t.isLeft()?(0,n.left)(t.value):(0,n.right)(!0)}demandRight(e){return this.rights.find((t=>t.name.value==e))?(0,n.right)(!0):(0,n.left)(new i.DomainError("You have not right for execute this opertion"))}}t.UserAggregate=c},4722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailValueObject=void 0;const n=r(1200),i=r(9521);class o{constructor(e){this.value=e}static new(e){return"string"!=typeof e?(0,i.left)(new n.DomainError("Invalid email address")):e.match(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/)?(0,i.right)(new o(e)):(0,i.left)(new n.DomainError("Invalid email address"))}}t.EmailValueObject=o},7723:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(4722),t),i(r(6464),t),i(r(2215),t),i(r(1093),t)},6464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordValueObject=void 0;const n=r(9521),i=r(1200);class o{constructor(e){this.value=e}static new(e){return"string"!=typeof e||e.length<5||e.length>10?(0,n.left)(new i.DomainError("Invalid password")):(0,n.right)(new o(e))}verify(e){return e!=this.value?(0,n.left)(new i.DomainError("Wrong password")):(0,n.right)(!0)}}t.PasswordValueObject=o},2215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RightDescriptionValueObject=void 0;const n=r(9521),i=r(1200);class o{constructor(e){this.value=e}static new(e){return"string"!=typeof e?(0,n.left)(new i.DomainError("Invalid description of system right")):(0,n.right)(new o(e))}}t.RightDescriptionValueObject=o},1093:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RightNameValueObject=void 0;const n=r(9521),i=r(1200);class o{constructor(e){this.value=e}static new(e){return"string"!=typeof e||"GLOBAL_ADMIN"!=e&&"ADMIN_MARK"!=e&&"ADMIN_DASHBOARD"!=e?(0,n.left)(new i.DomainError("Invalid name of sytem right")):(0,n.right)(new o(e))}}t.RightNameValueObject=o},1920:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(3641),t)},6445:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>O,parse:()=>m,stringify:()=>l,v1:()=>g,v3:()=>b,v4:()=>w,v5:()=>j,validate:()=>c,version:()=>E});var n=r(6113),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function(e){return"string"==typeof e&&u.test(e)},f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).substr(1));const l=function(e,t=0){const r=(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase();if(!c(r))throw TypeError("Stringified UUID is invalid");return r};let h,p,d=0,v=0;const g=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||h,s=void 0!==e.clockseq?e.clockseq:p;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=h=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=p=16383&(t[6]<<8|t[7]))}let u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:v+1;const f=u-d+(c-v)/1e4;if(f<0&&void 0===e.clockseq&&(s=s+1&16383),(f<0||u>d)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=u,v=c,p=s,u+=122192928e5;const g=(1e4*(268435455&u)+c)%4294967296;i[n++]=g>>>24&255,i[n++]=g>>>16&255,i[n++]=g>>>8&255,i[n++]=255&g;const m=u/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=255&m,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||l(i)},m=function(e){if(!c(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function y(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=m(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return l(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const b=y("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()})),w=function(e,t,r){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return l(n)},j=y("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),O="00000000-0000-0000-0000-000000000000",E=function(e){if(!c(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},4300:e=>{"use strict";e.exports=r(300)},6113:e=>{"use strict";e.exports=r(113)},2781:e=>{"use strict";e.exports=r(781)},3837:e=>{"use strict";e.exports=r(837)},9521:(e,t)=>{"use strict";var r;function n(e){return"function"==typeof e.value}Object.defineProperty(t,"__esModule",{value:!0}),t.isEither=t.chain=t.from=t.right=t.left=t.mergeInMany=t.mergeInOne=t.merge=void 0,function(e){e.Left="Left",e.Right="Right"}(r||(r={}));class i{constructor(e,t){this.type=e,this.value=t}static chain(e){return t=>t.asyncChain(e)}static mergeInOne(e){return e.reduce(((e,t)=>e.chain((e=>t.map((t=>e.concat([t])))))),i.right([]))}static mergeInMany(e){return e.reduce(((e,t)=>e.isLeft()?t.isLeft()?i.left(e.value.concat([t.value])):e:t.isLeft()?i.left([t.value]):e.chain((e=>t.map((t=>[...e,t]))))),i.right([]))}static from(e){return i.right(e)}static right(e){return new i("Right",e)}static left(e){return new i("Left",e)}isLeft(){return"Left"===this.type}isRight(){return"Right"===this.type}join(){return this.chain((e=>e))}mapRight(e){return this.map(e)}mapLeft(e){return this.isLeft()?i.left(e(this.value)):i.right(this.value)}map(e){return this.isLeft()?i.left(this.value):i.right(e(this.value))}asyncMap(e){return this.isLeft()?Promise.resolve(i.left(this.value)):e(this.value).then((e=>i.right(e)))}apply(e){if(this.isLeft())return i.left(this.value);if(e.isLeft())return i.left(e.value);if(n(this))return e.map(this.value);if(n(e))return e.apply(this);throw new Error("Some of the arguments should be a function")}asyncApply(e){if(this.isLeft())return Promise.resolve(i.left(this.value));if(e.isLeft())return Promise.resolve(i.left(e.value));if(n(this))return e.map((e=>Promise.resolve(e))).asyncMap((e=>e.then(this.value)));if(n(e))return e.asyncApply(this);throw new Error("Some of the arguments should be a function")}chain(e){return this.isLeft()?i.left(this.value):e(this.value)}asyncChain(e){return this.isLeft()?Promise.resolve(i.left(this.value)):e(this.value)}or(e){return this.isLeft()?e:this}unwrap(){if(this.isRight())return this.value;throw new Error("Either state is Left")}}i.merge=i.mergeInOne,t.merge=i.merge,t.mergeInOne=i.mergeInOne,t.mergeInMany=i.mergeInMany,t.left=i.left,t.right=i.right,t.from=i.from,t.chain=i.chain,t.isEither=e=>e instanceof i}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(1920)})(),e.exports=n()},300:e=>{"use strict";e.exports=require("buffer")},113:e=>{"use strict";e.exports=require("crypto")},781:e=>{"use strict";e.exports=require("stream")},837:e=>{"use strict";e.exports=require("util")},521:(e,t)=>{"use strict";var r;function n(e){return"function"==typeof e.value}Object.defineProperty(t,"__esModule",{value:!0}),t.isEither=t.chain=t.from=t.right=t.left=t.mergeInMany=t.mergeInOne=t.merge=void 0,function(e){e.Left="Left",e.Right="Right"}(r||(r={}));class i{constructor(e,t){this.type=e,this.value=t}static chain(e){return t=>t.asyncChain(e)}static mergeInOne(e){return e.reduce(((e,t)=>e.chain((e=>t.map((t=>e.concat([t])))))),i.right([]))}static mergeInMany(e){return e.reduce(((e,t)=>e.isLeft()?t.isLeft()?i.left(e.value.concat([t.value])):e:t.isLeft()?i.left([t.value]):e.chain((e=>t.map((t=>[...e,t]))))),i.right([]))}static from(e){return i.right(e)}static right(e){return new i("Right",e)}static left(e){return new i("Left",e)}isLeft(){return"Left"===this.type}isRight(){return"Right"===this.type}join(){return this.chain((e=>e))}mapRight(e){return this.map(e)}mapLeft(e){return this.isLeft()?i.left(e(this.value)):i.right(this.value)}map(e){return this.isLeft()?i.left(this.value):i.right(e(this.value))}asyncMap(e){return this.isLeft()?Promise.resolve(i.left(this.value)):e(this.value).then((e=>i.right(e)))}apply(e){if(this.isLeft())return i.left(this.value);if(e.isLeft())return i.left(e.value);if(n(this))return e.map(this.value);if(n(e))return e.apply(this);throw new Error("Some of the arguments should be a function")}asyncApply(e){if(this.isLeft())return Promise.resolve(i.left(this.value));if(e.isLeft())return Promise.resolve(i.left(e.value));if(n(this))return e.map((e=>Promise.resolve(e))).asyncMap((e=>e.then(this.value)));if(n(e))return e.asyncApply(this);throw new Error("Some of the arguments should be a function")}chain(e){return this.isLeft()?i.left(this.value):e(this.value)}asyncChain(e){return this.isLeft()?Promise.resolve(i.left(this.value)):e(this.value)}or(e){return this.isLeft()?e:this}unwrap(){if(this.isRight())return this.value;throw new Error("Either state is Left")}}i.merge=i.mergeInOne,t.merge=i.merge,t.mergeInOne=i.mergeInOne,t.mergeInMany=i.mergeInMany,t.left=i.left,t.right=i.right,t.from=i.from,t.chain=i.chain,t.isEither=e=>e instanceof i}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.GettingUserAdapter=e.GettingUserByemailAdapter=void 0;var t=r(991);Object.defineProperty(e,"GettingUserByemailAdapter",{enumerable:!0,get:function(){return t.GettingByemailAdapter}});var i=r(927);Object.defineProperty(e,"GettingUserAdapter",{enumerable:!0,get:function(){return i.GettingAdapter}})})(),n})()));